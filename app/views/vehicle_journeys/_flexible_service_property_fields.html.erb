<div id="index_item" class="panel panel-default">
  <%= f.inputs :class => 'nested-fields' do %>
      <p>
        <%= link_to_remove_association t("remove_flexible_service_properties"), f %>
      </p>
      <p>
        <%= f.input :objectid, :label => t('flexible_service_properties_objectid'), :input_html => { :value => @vehicle_journey.objectid.sub(":VehicleJourney", ":FlexibleServiceProperties") }%>
      </p>
      <p>
        <%= f.input :flexible_service_type, :label => t('flexible_service_type'), :as => :select, :collection => Chouette::VehicleJourney.flexible_service_types, :include_blank => false, :member_label => Proc.new {|mode| t("flexible_service_types.label.#{mode}")}%>
      </p>
      <p>
        <%= f.input :cancellation_possible, label: @vehicle_journey.human_attribute_name("cancellation_possible") %>
      </p>
      <p>
        <%= f.input :change_of_time_possible, label: @vehicle_journey.human_attribute_name("change_of_time_possible") %>
      </p>
      <% f.object.build_booking_arrangement unless f.object.booking_arrangement %>
      <%= render "booking_arrangements/form", :form => f %>
  <% end %>
</div>

<script>
    $(function () {
        $(".remove_fields").click(function() {
            var flexibleService = $("#vehicle_journey_flexible_service").val();
            if (flexibleService === "true") {
                $(".links").show();
            }
        });
    });
</script>